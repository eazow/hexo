---
title: B-Tree
date: 2023-09-10 23:57:20
tags:
categories: Coding
---



B-Tree是 SQLite 用来表示表和索引的数据结构，因此它是一个非常核心的思想。本文只是介绍数据结构，所以不会有任何代码。

为什么树是数据库的良好数据结构？

- 搜索特定值很快（对数时间）
- 插入/删除您已经找到的值速度很快（重新平衡的时间很长）
- 遍历一系列值的速度很快（与哈希映射不同）

B 树与二叉树不同（“B”可能代表发明者的名字，但也可以代表“平衡”）。这是一个 B 树示例：

<img src="https://cstack.github.io/db_tutorial/assets/images/B-tree.png" alt="example B-Tree (https://en.wikipedia.org/wiki/File:B-tree.svg)" style="zoom:67%;" />



与二叉树不同，B 树中的每个节点可以有 2 个以上的子节点。每个节点最多可以有 m 个子节点，其中 m 称为树的“order”。为了保持树基本平衡，我们还说节点必须至少有 m/2 个子节点（向上舍入）。

例外情况：

- 叶节点有 0 个子节点

- 根节点可以有少于 m 个子节点，但必须至少有 2 个
- 如果根节点是叶节点（唯一的节点），它仍然有 0 个子节点

上图是一个B-Tree，SQLite用它来存储索引。为了存储表，SQLites 使用一种称为 B+ 树的变体。

|                      | B-tree     | B+ tree         |
| :------------------- | :--------- | --------------- |
| 发音                 | “Bee Tree” | “Bee Plus Tree” |
| 用于存储             | 索引       | 表格            |
| 内部节点存储密钥     | Yes        | Yes             |
| 内部节点存储值       | Yes        | No              |
| 每个节点的子节点数量 | 较少       | 更多            |
| 内部节点与叶节点     | 结构相同   | 结构不同        |
